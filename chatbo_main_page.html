<!--MAIN HTTML CODE-->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kindred AI.com</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="bot.css">
    <link rel="stylesheet" href="botmenu.css">
</head>

<body>

    <header class="header">
        <div class="upgrade-button">Upgrade to Kindred AI Plus</div>

        <!-- Trigger (three vertical dots) -->

        <button class="menu-trigger" id="menuTrigger" aria-expanded="false" aria-controls="threeDotPanel" title="Open menu">
            <span class="dots" aria-hidden="true">
                <span class="dot"></span>
                <span class="dot"></span>
                <span class="dot"></span>
            </span>
            <span class="sr-only"></span>
        </button>
        <!-- Overlay -->
        <div class="overlay" id="overlay"></div>

        <!-- Sliding panel -->
        <aside class="panel" id="threeDotPanel" role="dialog" aria-modal="true" aria-labelledby="panelTitle" style="display: flex; flex-direction: column; height: 100vh;">
            <header>
                <h3 id="panelTitle">Quick Menu</h3>
                <button class="close-btn" id="closeBtn" aria-label="Close menu">âœ•</button>
            </header>

            <nav style="flex-grow: 1; display: flex; flex-direction: column;">
                <ul class="menu-list" style="flex-grow: 1;">
                    <li><a href="#profile">ğŸ‘¤ Profile</a></li>

                    <li onclick="toggleList()" style="cursor:pointer;">
                        <div class="dropdown-container" id="companionDropdownContainer">
                            <span class="material-icons input-icon" id="toolsIcon">ğŸ§‘â€ğŸš€ Characters</span>
                            <div class="dropdown-content" id="companionDropdown">
                                <div class="dropdown-title">Select your companion</div>
                                <div class="dropdown-item selected" data-char="None">Standard AI</div>
                                <div class="dropdown-item" data-char="Bob">ğŸ‘±Bob</div>
                                <div class="dropdown-item" data-char="Sara">ğŸ‘©Sara</div>
                                <div class="dropdown-item" data-char="Cristiana">ğŸ‘©â€ğŸ’¼Cristiana</div>
                                <div class="dropdown-item" data-char="Aryan">ğŸ‘¨Aryan</div>
                                <div class="dropdown-item" data-char="Maya">ğŸ‘©Maya</div>
                                <div class="dropdown-item" data-char="Amar">ğŸ‘¨Amar</div>
                            </div>
                        </div>
                    </li>
                    <li>
                        <li>
                            <a href="javascript:void(0)" id="startSpeakingMode" style="display: flex; align-items: center; gap: 10px;">
                                <span class="material-icons">record_voice_over</span> Speaking Mode
                            </a>
                        </li>
                    </li>
                    <li><a href="#help">ğŸ‘©â€ğŸ«English learning Mode</a></li>
                    <li><a href="#help">â“Help & feedback</a></li>
                    <li><a href="#settings">âš™ï¸ Settings</a></li>
                </ul>

                <ul class="menu-list">
                    <li><a href="#logout" style="color: #ef4444;">ğŸš« Log out</a></li>
                </ul>
            </nav>

            <div style="padding: 90px; font-size: 13px; color: #3d4249; border-top: 1px solid #e2e8f0;">
                Version 1.0
            </div>
        </aside>
    </header>

    <div class="chat-container" id="chatContainer">
        <div class="message-row bot-row" style="animation-delay: 0.1s;">
            <div class="message-bubble" id="initialBotMessage">
                Hi
            </div>
        </div>
    </div>

    <footer class="input-bar-wrapper">
        <div class="input-bar">



            <textarea class="input-field" id="messageInput" placeholder="Ask your companion..." rows="1"></textarea>
            <div class="send-icon">
                <span class="material-icons input-icon" id="sendButton">send</span>
            </div>
            <div class="mic-icons">
                <span class="material-icons input-icon" id="micIcon">mic</span>
            </div>

            <div class="mode-container" id="modeDropdownContainer">
                <div class="mode-display" id="modeDisplay">
                    <span id="currentMode">Fast</span>
                    <span class="material-icons">arrow_drop_down</span>
                </div>
                <div class="mode-content" id="modeDropdown">
                    <div class="dropdown-item selected" data-mode="Fast">Fast</div>
                    <div class="dropdown-item" data-mode="Balanced">Balanced</div>
                    <div class="dropdown-item" data-mode="Detailed">Detailed</div>
                </div>
            </div>

        </div>
    </footer>
    <script src="bot.js"></script>
    <script src="botmenu.js"></script>

    <script>
        function toggleList() {
            const list = document.getElementById("companionDropdown");

            if (list.style.display === "block") {
                list.style.display = "none"; // hide// for character list
            } else {
                list.style.display = "block"; // show
            }
        }
    </script>


    <!--for voice assistant!-->
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            // 1. SELECT THE ELEMENTS
            const speakModeBtn = document.getElementById("startSpeakingMode");
            const micBtn = document.getElementById("micIcon");
            const inputField = document.getElementById("messageInput");

            // 2. SETUP SPEECH TOOLS
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            const recognition = new SpeechRecognition();
            recognition.lang = "en-US";

            const synth = window.speechSynthesis;
            let isSpeakingMode = false;

            // 3. THE "TALK BACK" FUNCTION
            function askAI(text) {
                const utterance = new SpeechSynthesisUtterance(text);

                // When AI starts talking, stop the red pulse
                utterance.onstart = () => {
                    micBtn.parentElement.classList.remove("active");
                };

                // When AI finishes talking, start listening again automatically
                utterance.onend = () => {
                    if (isSpeakingMode) {
                        recognition.start();
                        micBtn.parentElement.classList.add("active");
                    }
                };

                synth.speak(utterance);
            }

            // 4. THE MENU BUTTON CLICK
            speakModeBtn.addEventListener("click", (e) => {
                e.preventDefault();
                isSpeakingMode = !isSpeakingMode; // Toggle mode On/Off

                if (isSpeakingMode) {
                    speakModeBtn.style.color = "red"; // Visual cue in menu
                    recognition.start();
                    micBtn.parentElement.classList.add("active");
                    askAI("Speaking mode activated. I am listening.");
                } else {
                    speakModeBtn.style.color = "";
                    isSpeakingMode = false;
                    recognition.stop();
                    synth.cancel();
                    micBtn.parentElement.classList.remove("active");
                }
            });

            // 5. HANDLE THE VOICE RESULT
            recognition.onresult = (event) => {
                const transcript = event.results[0][0].transcript;
                inputField.value = transcript;

                // Example logic:
                let reply = "I heard you say " + transcript;
                if (transcript.toLowerCase().includes("hello")) {
                    reply = "Hello! How can I help you today?";
                }

                askAI(reply);
            };

            // Auto-restart if silence happens
            recognition.onend = () => {
                if (isSpeakingMode && !synth.speaking) {
                    recognition.start();
                }
            };
        });
    </script>
</body>


</html>
